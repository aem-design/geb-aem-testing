version: "3.8"

services:

  seleniumhub:
    extends:
      file: ./docker/selenium/docker-compose.yml
      service: seleniumhub

  selenium-node-chrome:
    extends:
      file: ./docker/selenium/docker-compose.yml
      service: selenium-node-chrome
    depends_on:
      - seleniumhub

  author:
    extends:
      file: ./docker/aem/docker-compose.yml
      service: author

  publish:
    extends:
      file: ./docker/aem/docker-compose.yml
      service: publish
    depends_on:
      - author

  testing:
    extends:
      file: ./docker/testing/docker-compose.yml
      service: testing
    profiles:
      - dotest
    depends_on:
      - author
      - seleniumhub

networks:
  seleniumgrid:
  author-network:
  publish-network:
  dispatcher-network:
